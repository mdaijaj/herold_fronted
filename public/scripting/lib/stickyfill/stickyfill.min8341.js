!function(doc,win){function noop(){}var scroll,checkTimer,watchArray=[],initialized=!1,html=doc.documentElement,hiddenPropertyName="hidden",visibilityChangeEventName="visibilitychange";void 0!==doc.webkitHidden&&(hiddenPropertyName="webkitHidden",visibilityChangeEventName="webkitvisibilitychange"),win.getComputedStyle||seppuku();for(var prefixes=["","-webkit-","-moz-","-ms-"],block=document.createElement("div"),i=prefixes.length-1;0<=i;i--){try{block.style.position=prefixes[i]+"sticky"}catch(e){}""!=block.style.position&&seppuku()}function seppuku(){init=add=rebuild=pause=stop=kill=noop}function parseNumeric(val){return parseFloat(val)||0}function updateScrollPos(){scroll={top:win.pageYOffset,left:win.pageXOffset}}function onScroll(){if(win.pageXOffset!=scroll.left)return updateScrollPos(),void rebuild();win.pageYOffset!=scroll.top&&(updateScrollPos(),recalcAllPos())}function onWheel(event){setTimeout(function(){win.pageYOffset!=scroll.top&&(scroll.top=win.pageYOffset,recalcAllPos())},0)}function recalcAllPos(){for(var i=watchArray.length-1;0<=i;i--)recalcElementPos(watchArray[i])}function recalcElementPos(el){if(el.inited){var currentMode=scroll.top<=el.limit.start?0:scroll.top>=el.limit.end?2:1;el.mode!=currentMode&&function(el,mode){var nodeStyle=el.node.style;switch(mode){case 0:nodeStyle.position="absolute",nodeStyle.left=el.offset.left+"px",nodeStyle.right=el.offset.right+"px",nodeStyle.top=el.offset.top+"px",nodeStyle.bottom="auto",nodeStyle.width="auto",nodeStyle.marginLeft=0,nodeStyle.marginRight=0,nodeStyle.marginTop=0;break;case 1:nodeStyle.position="fixed",nodeStyle.left=el.box.left+"px",nodeStyle.right=el.box.right+"px",nodeStyle.top=el.css.top,nodeStyle.bottom="auto",nodeStyle.width="auto",nodeStyle.marginLeft=0,nodeStyle.marginRight=0,nodeStyle.marginTop=0;break;case 2:nodeStyle.position="absolute",nodeStyle.left=el.offset.left+"px",nodeStyle.right=el.offset.right+"px",nodeStyle.top="auto",nodeStyle.bottom=0,nodeStyle.width="auto",nodeStyle.marginLeft=0,nodeStyle.marginRight=0}el.mode=mode}(el,currentMode)}}function initElement(el){isNaN(parseFloat(el.computed.top))||el.isCell||"none"==el.computed.display||(el.inited=!0,el.clone||function(el){el.clone=document.createElement("div");var refElement=el.node.nextSibling||el.node,cloneStyle=el.clone.style;el.clone.className+=" clone-of-"+el.node.id,cloneStyle.height=el.height+"px",cloneStyle.width=el.width+"px",cloneStyle.marginTop=el.computed.marginTop,cloneStyle.marginBottom=el.computed.marginBottom,cloneStyle.marginLeft=el.computed.marginLeft,cloneStyle.marginRight=el.computed.marginRight,cloneStyle.padding=cloneStyle.border=cloneStyle.borderSpacing=0,cloneStyle.fontSize="1em",cloneStyle.position="static",cloneStyle.cssFloat=el.computed.cssFloat,el.node.parentNode.insertBefore(el.clone,refElement)}(el),"absolute"!=el.parent.computed.position&&"relative"!=el.parent.computed.position&&(el.parent.node.style.position="relative"),recalcElementPos(el),el.parent.height=el.parent.node.offsetHeight,el.docOffsetTop=getDocOffsetTop(el.clone))}function deinitElement(el){var deinitParent=!0;el.clone&&function(el){el.clone.parentNode.removeChild(el.clone),el.clone=void 0}(el),function(targetObj,sourceObject){for(var key in sourceObject)sourceObject.hasOwnProperty(key)&&(targetObj[key]=sourceObject[key])}(el.node.style,el.css);for(var i=watchArray.length-1;0<=i;i--)if(watchArray[i].node!==el.node&&watchArray[i].parent.node===el.parent.node){deinitParent=!1;break}deinitParent&&(el.parent.node.style.position=el.parent.css.position),el.mode=-1}function initAll(){for(var i=watchArray.length-1;0<=i;i--)initElement(watchArray[i])}function deinitAll(){for(var i=watchArray.length-1;0<=i;i--)deinitElement(watchArray[i])}function getElementParams(node){var computedStyle=getComputedStyle(node),parentNode=node.parentNode,parentComputedStyle=getComputedStyle(parentNode),cachedPosition=node.style.position;node.style.position="relative";var computed={top:computedStyle.top,marginTop:computedStyle.marginTop,marginBottom:computedStyle.marginBottom,marginLeft:computedStyle.marginLeft,marginRight:computedStyle.marginRight,cssFloat:computedStyle.cssFloat,display:computedStyle.display},numeric={top:parseNumeric(computedStyle.top),marginBottom:parseNumeric(computedStyle.marginBottom),paddingLeft:parseNumeric(computedStyle.paddingLeft),paddingRight:parseNumeric(computedStyle.paddingRight),borderLeftWidth:parseNumeric(computedStyle.borderLeftWidth),borderRightWidth:parseNumeric(computedStyle.borderRightWidth)};node.style.position=cachedPosition;var css={position:node.style.position,top:node.style.top,bottom:node.style.bottom,left:node.style.left,right:node.style.right,width:node.style.width,marginTop:node.style.marginTop,marginLeft:node.style.marginLeft,marginRight:node.style.marginRight},nodeOffset=getElementOffset(node),parentOffset=getElementOffset(parentNode),parent={node:parentNode,css:{position:parentNode.style.position},computed:{position:parentComputedStyle.position},numeric:{borderLeftWidth:parseNumeric(parentComputedStyle.borderLeftWidth),borderRightWidth:parseNumeric(parentComputedStyle.borderRightWidth),borderTopWidth:parseNumeric(parentComputedStyle.borderTopWidth),borderBottomWidth:parseNumeric(parentComputedStyle.borderBottomWidth)}};return{node:node,box:{left:nodeOffset.win.left,right:html.clientWidth-nodeOffset.win.right},offset:{top:nodeOffset.win.top-parentOffset.win.top-parent.numeric.borderTopWidth,left:nodeOffset.win.left-parentOffset.win.left-parent.numeric.borderLeftWidth,right:-nodeOffset.win.right+parentOffset.win.right-parent.numeric.borderRightWidth},css:css,isCell:"table-cell"==computedStyle.display,computed:computed,numeric:numeric,width:nodeOffset.win.right-nodeOffset.win.left,height:nodeOffset.win.bottom-nodeOffset.win.top,mode:-1,inited:!1,parent:parent,limit:{start:nodeOffset.doc.top-numeric.top,end:parentOffset.doc.top+parentNode.offsetHeight-parent.numeric.borderBottomWidth-node.offsetHeight-numeric.top-numeric.marginBottom}}}function getDocOffsetTop(node){for(var docOffsetTop=0;node;)docOffsetTop+=node.offsetTop,node=node.offsetParent;return docOffsetTop}function getElementOffset(node){var box=node.getBoundingClientRect();return{doc:{top:box.top+win.pageYOffset,left:box.left+win.pageXOffset},win:box}}function startFastCheckTimer(){checkTimer=setInterval(function(){!function(){for(var i=watchArray.length-1;0<=i;i--)if(watchArray[i].inited){var deltaTop=Math.abs(getDocOffsetTop(watchArray[i].clone)-watchArray[i].docOffsetTop),deltaHeight=Math.abs(watchArray[i].parent.node.offsetHeight-watchArray[i].parent.height);if(2<=deltaTop||2<=deltaHeight)return!1}return!0}()&&rebuild()},500)}function stopFastCheckTimer(){clearInterval(checkTimer)}function handlePageVisibilityChange(){initialized&&(document[hiddenPropertyName]?stopFastCheckTimer():startFastCheckTimer())}function init(){initialized||(updateScrollPos(),initAll(),win.addEventListener("scroll",onScroll),win.addEventListener("wheel",onWheel),win.addEventListener("resize",rebuild),win.addEventListener("orientationchange",rebuild),doc.addEventListener(visibilityChangeEventName,handlePageVisibilityChange),startFastCheckTimer(),initialized=!0)}function rebuild(){if(initialized){deinitAll();for(var i=watchArray.length-1;0<=i;i--)watchArray[i]=getElementParams(watchArray[i].node);initAll()}}function pause(){win.removeEventListener("scroll",onScroll),win.removeEventListener("wheel",onWheel),win.removeEventListener("resize",rebuild),win.removeEventListener("orientationchange",rebuild),doc.removeEventListener(visibilityChangeEventName,handlePageVisibilityChange),stopFastCheckTimer(),initialized=!1}function stop(){pause(),deinitAll()}function kill(){for(stop();watchArray.length;)watchArray.pop()}function add(node){for(var i=watchArray.length-1;0<=i;i--)if(watchArray[i].node===node)return;if(node){var el=getElementParams(node);watchArray.push(el),initialized?initElement(el):init()}}updateScrollPos(),win.Stickyfill={stickies:watchArray,add:add,remove:function(node){for(var i=watchArray.length-1;0<=i;i--)watchArray[i].node===node&&(deinitElement(watchArray[i]),watchArray.splice(i,1))},init:init,rebuild:rebuild,pause:pause,stop:stop,kill:kill}}(document,window),window.jQuery&&(window.jQuery.fn.Stickyfill=function(options){return this.each(function(){Stickyfill.add(this)}),this});
//# sourceMappingURL=stickyfill.min.js.map